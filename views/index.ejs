<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Church</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Demo project" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      type="text/css"
      href="styles/bootstrap4/bootstrap.min.css"
    />
    <link
      href="plugins/font-awesome-4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="plugins/OwlCarousel2-2.2.1/owl.carousel.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="plugins/OwlCarousel2-2.2.1/owl.theme.default.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="plugins/OwlCarousel2-2.2.1/animate.css"
    />
    <link rel="stylesheet" type="text/css" href="styles/main_styles.css" />
    <link rel="stylesheet" type="text/css" href="styles/responsive.css" />
    <link rel="stylesheet" type="text/css" href="styles/popup_styles.css" />
  </head>
  <body>
    <div class="super_container">
      <header class="header">
        <div class="header_container">
          <div class="container">
            <div class="row">
              <div class="col">
                <div
                  class="header_content d-flex flex-row align-items-center justify-content-start"
                >
                <div class="logo_container">
                  <div class="logo">
                    <a class="logo_align" href="#">
                      <img src="images/holy-spirit-logo-md.jpg" alt="Holy Spirit Church Logo">
                      <div class="logo_text">
                        <h2>Holy Spirit Church</h2>
                        <span>Mukka</span>
                      </div>
                    </a>
                  </div>
                </div>

                  <div class="header_nav_container ml-auto">
                    <nav class="main_nav">
                      <ul>
                        <li class="active"><a href="#">Home</a></li>
                        <li><a href="priest.ejs">Priests</a></li>
                        <li><a href="sermons.ejs">Sermons</a></li>
                        <li><a href="associations.ejs">Associations</a></li>
                        <li><a href="institution.ejs">Commisions</a></li>
                        <li><a href="blog.ejs">Blog</a></li>
                        <li><a href="institution.ejs">Institution</a></li>
                        <li><a href="contact.ejs">Contact</a></li>
                      </ul>
                    </nav>
                  </div>
                  <div class="search">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      version="1.1"
                      id="Capa_1"
                      x="0px"
                      y="0px"
                      viewBox="0 0 56.966 56.966"
                      style="enable-background: new 0 0 56.966 56.966"
                      xml:space="preserve"
                      width="13px"
                      height="14px"
                    >
                      <path
                        class="search_path"
                        d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"
                        fill="#353535"
                      />
                    </svg>
                  </div>
                  <div class="hamburger ml-auto">
                    <i class="fa fa-bars" aria-hidden="true"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="header_search_container">
            <div class="container">
              <div class="row">
                <div class="col">
                  <div
                    class="header_search_content d-flex flex-row align-items-center justify-content-end"
                  >
                    <form id="searchForm" class="header_search_form">
                      <input
                        type="search"
                        id="searchInput"
                        class="search_input"
                        placeholder="Search"
                        required="required"
                      />
                      <button
                        type="submit"
                        class="header_search_button d-flex flex-column align-items-center justify-content-center"
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          xmlns:xlink="http://www.w3.org/1999/xlink"
                          version="1.1"
                          id="Capa_2"
                          x="0px"
                          y="0px"
                          viewBox="0 0 56.966 56.966"
                          style="enable-background: new 0 0 56.966 56.966"
                          xml:space="preserve"
                          width="20px"
                          height="20px"
                        >
                          <path
                            class="search_path"
                            d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"
                            fill="#353535"
                          />
                        </svg>
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <div id="searchModal" class="modal">
              <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Search Results</h2>
                <div id="searchResults"></div>
              </div>
            </div>

          </div>
        </div>
      </header>

      <div
        class="menu d-flex flex-column align-items-center justify-content-center"
      >
        <div class="menu_content">
          <div
            class="cross_1 d-flex flex-column align-items-center justify-content-center"
          >
            <img src="images/cross_1.png" alt />
          </div>
          <nav class="menu_nav">
            <ul>
              <li class="active"><a href="#">Home</a></li>
              <li><a href="priest.ejs">Priests</a></li>
              <li><a href="sermons.ejs">Sermons</a></li>
              <li><a href="associations.ejs">Associations</a></li>
              <li><a href="institution.ejs">Commisions</a></li>
              <li><a href="blog.ejs">Blog</a></li>
              <li><a href="institution.ejs">Institution</a></li>
              <li><a href="contact.ejs">Contact</a></li>
            </ul>
          </nav>
        </div>
        <div class="menu_close">
          <i class="fa fa-times" aria-hidden="true"></i>
        </div>
      </div>

      <div class="home">
        <div class="home_slider_container">
          <div type="button"
            class="home_slider_nav home_slider_prev d-flex flex-column align-items-center justify-content-center" id="go-to-prev"
          >
            <img src="images/arrow_l.png" alt />
          </div>
          <div class="poster-container" id="poster-slider">
            <!-- displayed here -->
          </div>
          <div type="button"
            class="home_slider_nav home_slider_next d-flex flex-column align-items-center justify-content-center" id="go-to-next"
          >
            <img src="images/arrow_r.png" alt />
          </div>
        </div>
      </div>

      <div class="intro">
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="section_title_container">
                <div class="section_image">
                  <img src="images/church_1.png" alt />
                </div>
                <div class="section_title">
                  <h3>Welcome to Our</h3>
                  <h2 id="church-title"></h2>
                </div>
                <div class="section_subtitle">God loves us all</div>
              </div>
            </div>
          </div>
          <div class="row intro_content">
            <div class="col-lg-6">
              <div class="intro_text">
                <p id="church-details"></p>
                <div class="button intro_button"><a href="#">Read More</a></div>
              </div>
            </div>

            <div class="col-lg-6">
              <div class="intro_image"><img id="church-image" alt /></div>
            </div>
          </div>
        </div>
      </div>

      <div class="services">
        <div
          class="services_background parallax-window"
          data-parallax="scroll"
          data-image-src="images/services.jpg"
          data-speed="0.1"
        ></div>
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="section_title_container">
                <div class="section_image">
                  <img src="images/church_2.png" alt />
                </div>
                <div class="section_title">
                  <h2>Discover More About Church</h2>
                </div>
                <div class="section_subtitle">Peace Be With You</div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="services_text text-center">
                <p>
                  Bringing together people of all ages through various
                  activities and services, Holy Spirit Church in Mukka fosters a
                  strong sense of togetherness. From engaging community
                  associations and uplifting worship services to events that
                  celebrate our shared faith, the church is a hub of unity and
                  joy. Our vibrant parish life is beautifully captured in our
                  gallery, reflecting the essence of our community. Join us to
                  experience a place where faith, fellowship, and support are at
                  the heart of everything we do.
                </p>
              </div>
            </div>
          </div>
          <div class="row services_row">
            <div class="col-lg-2 col-md-4 col-sm-6">
              <div class="services_item text-center">
                <div class="services_image">
                  <img src="images/daily_mass.png" alt />
                </div>
                <div class="services_title" id="daily_mass">Daily Mass</div>
              </div>
            </div>

            <div class="col-lg-2 col-md-4 col-sm-6">
              <div class="services_item text-center">
                <div class="services_image">
                  <img src="images/daily_reading.png" alt />
                </div>
                <div class="services_title" id="daily_reading">Daily Reading</div>
              </div>
            </div>

            <div class="col-lg-2 col-md-4 col-sm-6">
              <div class="services_item text-center">
                <div class="services_image">
                  <img src="images/ward.png" alt />
                </div>
                <div class="services_title">Wards</div>
              </div>
            </div>

            <div class="col-lg-2 col-md-4 col-sm-6">
              <div class="services_item text-center">
                <div class="services_image">
                  <img src="images/parish_council.png" alt />
                </div>
                <div class="services_title">Parish Council</div>
              </div>
            </div>

            <div class="col-lg-2 col-md-4 col-sm-6">
              <div class="services_item text-center">
                <div class="services_image">
                  <img src="images/gallery.png" alt />
                </div>
                <div class="services_title">Gallery</div>
              </div>
            </div>

            <div class="col-lg-2 col-md-4 col-sm-6">
              <div class="services_item text-center">
                <div class="services_image">
                  <img src="images/magazine.png" alt />
                </div>
                <div class="services_title">Magazine</div>
              </div>
            </div>
          </div>

          <div id="popupOverlay" class="popup-overlay"></div>
    
          <div id="readingsPopup" class="popup">
              <span class="close-btn" onclick="closePopup()">×</span>
              <h2 class="heading">Readings</h2>
              <div id="readingsContent"></div>
          </div>
      
          <div id="schedulePopup" class="popup">
              <span class="close-btn" onclick="closePopup()">×</span>
              <h2 class="heading">Mass Schedule</h2>
              <table id="scheduleTable">
                  <thead>
                      <tr>
                          <th rowspan="2">Days</th>
                          <th colspan="3">Info</th>
                      </tr>
                      <tr>
                          <th>Occasion</th>
                          <th>Date</th>
                          <th>Time</th>
                      </tr>
                  </thead>
                  <tbody id="scheduleBody">
                      <!-- Table rows will be dynamically inserted here -->
                  </tbody>
              </table>
          </div>

        </div>
      </div>

      <div class="priest">
        <div
          class="priest_background"
          style="background-image: url(images/sermon.png)"
        ></div>
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="section_title_container">
                <div class="section_image">
                  <img src="images/icons-01.png" alt />
                </div>
                <div class="section_title"><h2>Parish Priest</h2></div>
                <div class="section_subtitle">Grace and blessings to all</div>
              </div>
            </div>
          </div>
          <div class="row priest_row">
            <div class="col-lg-4">
              <div class="priest_image">
                <img id="priest-image" alt />
              </div>
            </div>

            <div class="col-lg-6">
              <div class="priest_content">
                <div class="priest_title">
                  <h2 id="priest-title"></h2>
                </div>
                <!-- <ul class="priest_list">
                  <li>Date Of Ordination: <a href="#">Priest Jack Smith</a></li>
                  <li>
                    Categories: <a href="#">Jesus Christ</a>,
                    <a href="#">Holy</a>
                  </li>
                  <li>Date: <a href="#">Monday 11 March, 2018</a></li>
                </ul> -->
                <div class="priest_text">
                  <p id="priest-details"></p>
                </div>
                <div class="button priest_button">
                  <a href="priest.ejs">Read More</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="causes">
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="section_title_container">
                <div class="section_image">
                  <img src="images/church_4.png" alt />
                </div>
                <div class="section_title"><h2>Obituary</h2></div>
                <div class="section_subtitle">God loves us all</div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
            <div class="causes_slider_container">

            <div class="slider-wrapper">
              <button id="prev" class="slider-nav slider-prev">
                <img src="images/arrow_l.png" alt="Previous" />
              </button>
              <div class="slider-container">
                <div class="slider" id="slider-container">
                  <!-- display here -->
                </div>
              </div>
              <button id="next" class="slider-nav slider-next">
                <img src="images/arrow_r.png" alt="Next" />
              </button>
            </div>

            </div>
            </div>
            </div>
          </div>
        </div>
      </div>

      <div class="quote lazy-load">
        <div
          class="quote_background parallax-window"
          data-parallax="scroll"
          data-image-src="images/quote.jpg"
          data-speed="0.1"
        ></div>
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="section_title_container">
                <div class="section_image">
                  <img src="images/church_5.png" loading="lazy" alt />
                </div>
                <div class="section_title"><h2>Living in God's Amazing Grace!</h2></div>
                <div class="section_subtitle">God loves us all</div>
              </div>
            </div>
          </div>
          <div class="row quote_row">
            <div class="col text-center">
              <div class="number-row" id="number-row">
                <!-- display numbers -->
            </div>

            </div>
          </div>
        </div>
      </div>

      <div class="news">
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="section_title_container">
                <div class="section_image">
                  <img src="images/church_6.png" alt />
                </div>
                <div class="section_title"><h2>Latest News</h2></div>
                <div class="section_subtitle">God loves us all</div>
              </div>
            </div>
          </div>
          <div class="row news_row">
            <div class="col-lg-4 news_col">
              <div class="news_item">
                <div class="news_image">
                  <img id="news_image" alt />
                  <div
                    class="news_date_bg d-flex flex-column align-items-center justify-content-center"
                  >
                    <div class="news_date" id="news_date"></div>
                    <div class="news_type">NEWS</div>
                  </div>
                </div>
                <div class="news_content">
                  <div class="news_title" id="news_title"></div>
                  <div class="news_text">
                    <p id="news_text"></p>
                  </div>
                  <div class="news_link"><a href="blog.ejs">Read More</a></div>
                </div>
              </div>
            </div>

            <div class="col-lg-4 news_col">
              <div class="news_item">
                <div class="news_image">
                  <img id="events_image" alt />
                  <div
                    class="news_date_bg d-flex flex-column align-items-center justify-content-center"
                  >
                    <div class="news_date" id="events_date"></div>
                    <div class="news_type">EVENTS</div>
                  </div>
                </div>
                <div class="news_content">
                  <div class="news_title" id="events_title">Help us raise money for the kids</div>
                  <div class="news_text" >
                    <p id="events_text"></p>
                  </div>
                  <div class="news_link"><a href="blog.ejs">Read More</a></div>
                </div>
              </div>
            </div>

            <div class="col-lg-4 news_col">
              <div class="news_item">
                <div class="news_image">
                  <img id="announcements_image" alt />
                  <div
                    class="news_date_bg d-flex flex-column align-items-center justify-content-center"
                  >
                    <div class="news_date" id="announcements_date"></div>
                    <div class="news_type">ANNOUCEMENTS</div>
                  </div>
                </div>
                <div class="news_content">
                  <div class="news_title" id="announcements_title">The best way to pray</div>
                  <div class="news_text" >
                    <p id="announcements_text"></p>
                  </div>
                  <div class="news_link"><a href="blog.ejs">Read More</a></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-lg-4 footer_col">
              <div class="logo_container">
                <div class="logo">
                  <a href="#">
                    <span>Believe</span>
                    <img src="images/logo_large.jpg" alt />
                  </a>
                </div>
                <div class="logo_subtitle">Church template</div>
              </div>
            </div>

            <div class="col-lg-5 footer_col">
              <div class="footer_contact">
                <div class="footer_title">Contact Us</div>
                <ul class="footer_ul">
                  <li class="footer_li">
                    <span>Address: </span>
                    <div id="church-address"></div>
                  </li>
                  <li class="footer_li">
                    <span>Phone: </span>
                    <div id="contact"></div>
                  </li>
                  <li class="footer_li">
                    <span>Email: </span>
                    <a id="email" href="" class="__cf_email__">[email&#160;protected]</a>

                  </li>
                </ul>
              </div>
            </div>
            <div class="col-lg-3">
              <div class="footer_social">
                <ul>
                  <li>
                    <a href="#"
                      ><i class="fa fa-google-plus" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-pinterest" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-facebook" aria-hidden="true"></i
                    ></a>
                  </li>
                  <li>
                    <a href="#"
                      ><i class="fa fa-twitter" aria-hidden="true"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="copyright text-center">
          Copyright &copy;
          <script
            data-cfasync="false"
            src="cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"
          ></script>
          <script>
            document.write(new Date().getFullYear());
          </script>
          All rights reserved 
        </div>
      </footer>
    </div>
    <script src="js/search.js"></script>
    <script src="js/popup.js"></script>
    <script src="js/footerContact.js"></script>
    <script src="js/loadNumbers.js"></script>
    <script src="js/poster_slider.js"></script>
    <script src="js/slider_script.js"></script>
    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="styles/bootstrap4/popper.js"></script>
    <script src="styles/bootstrap4/bootstrap.min.js"></script>
    <script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
    <script src="plugins/easing/easing.js"></script>
    <script src="plugins/parallax-js-master/parallax.min.js"></script>
    <script src="js/custom.js"></script>
    
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-23581568-13");
    </script>

    <script>
      async function fetchData(url, titleId, imageId, detailsId, addressId) {
        try {
          const response = await fetch(url, {
            method: "GET",
          });

          if (!response.ok) {
            throw new Error(
              "Network response was not ok " + response.statusText
            );
          }
          const data = await response.json();

          const len = data.length - 1;
          const imageUrl = data[len].image.replace(/^.*\/public\//, "../");

          document.getElementById(titleId).textContent = data[len].name;
          document.getElementById(imageId).src = imageUrl;
          document.getElementById(detailsId).textContent = data[len].description;
          if(addressId){
            document.getElementById(addressId).textContent = data[len].address;
          }
        } catch (error) {
          console.error("Error fetching data:", error);
        }
      }

      function initSlider() {
        fetchData(
          "/app/church/read",
          "church-title",
          "church-image",
          "church-details",
          "church-address"
        );
        fetchData(
          "/app/priest/read",
          "priest-title",
          "priest-image",
          "priest-details"
        );
      }
      document.addEventListener("DOMContentLoaded", initSlider);
    </script>
      <script>
        async function fetchNews(url) {
          try {
            const response = await fetch(url, {
              method: "GET",
            });
    
            if (!response.ok) {
              throw new Error("Network response was not ok " + response.statusText);
            }
    
            const data = await response.json();
            return data;
          } catch (error) {
            console.error("Error fetching data:", error);
            return [];
          }
        }
    
        function getMostRecentItem(data, type) {
          const filteredData = data.filter(item => item.type === type);
          if (filteredData.length === 0) return null;

          return filteredData[filteredData.length - 1];
        }
    
        function displayItem(image, title, text, dates, item) {
          if (item) {
            const imageUrl = item.image.replace(/^.*\/public\//, "../");
            document.getElementById(image).src=imageUrl;
            document.getElementById(title).textContent=`${item.title}`;

            const truncatedContent = item.content.length > 50 
            ? item.content.substring(0, 100) + '...' 
            : item.content;
            document.getElementById(text).textContent = truncatedContent;
            document.getElementById(dates).textContent = item.dates;
          } else {
            document.getElementById(title).textContent="No items available.";
            document.getElementById(title).textContent="No items available.";
            document.getElementById(text).textContent="No items available.";
          }
        }
    
        document.addEventListener("DOMContentLoaded", async () => {
          const data = await fetchNews("/app/news/read");
    
          const recentNews = getMostRecentItem(data, "news");
          const recentEvents = getMostRecentItem(data, "events");
          const recentAnnouncements = getMostRecentItem(data, "announcements");
    
          displayItem("news_image","news_title","news_text","news_date", recentNews);
          displayItem("events_image","events_title","events_text","events_date", recentEvents);
          displayItem("announcements_image","announcements_title","announcements_text","announcements_date", recentAnnouncements);
        });
      </script>
  </body>
</html>
